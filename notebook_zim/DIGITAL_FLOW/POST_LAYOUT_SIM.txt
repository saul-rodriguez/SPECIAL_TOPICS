Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2020-04-09T16:46:14+02:00

====== POST LAYOUT SIM ======
Created torsdag 09 april 2020

====== 1) Setup working directory ======

The same as in [[RTL SIMULATION.]] Recommended name for working directory: sim_postlay


====== 2) Script to load libaries/verilog code, elaborate, and simulate: ======


The make.sh script is almost the same is in [[RTL SIMULATION]] and [[GATE SIMULATION]] but now the verilog file that is loaded is the one that was generated by innovus:

rm -rf work*/* work*/.* *.log .simvision *.dsn *.trn *.vcd wave* *.X

xmvlog -work work_lib -cdslib ./cds.lib -logfile xmvlog_presyn.log \
	-errormax 15 -update -linedebug -status -define DISPLAY_PD_PU_EN \
	/pkg/xfab/XKIT/xh018/diglibs/D_CELLS_HD/v3_0/verilog/v3_0_0/D_CELLS_HD.v \
	/pkg/xfab/XKIT/xh018/diglibs/D_CELLS_HD/v3_0/verilog/v3_0_0/VLG_PRIMITIVES.v

# load P&R netlist
xmvlog -work work_sub -cdslib ./cds.lib -append_log \
	-logfile xmvlog_presyn.log -errormax 15 -update -linedebug \
	-status ../innovus2/output/USART_RX_BAMSE_pnr.v 

xmvlog -work work -cdslib ./cds.lib -append_log \
	-logfile xmvlog_presyn.log -errormax 15 -update -linedebug \
	-define postsyn -status ./usart_rx_bamse_tb.v

xmelab -work work -cdslib ./cds.lib -timescale '1ns/10ps' \
	-logfile xmelab_presyn.log -errormax 30 -access +wc \
	-nowarn CUVWSP -nowarn SDFNCAP -status work.usart_rx_bamse_tb

xmsim -cdslib ./cds.lib \
	-logfile xmsim_presyn.log -errormax 15 -status work.usart_rx_bamse_tb:module

**Note1:** Note2 and Note3 of  [[GATE SIMULATION]] applies also here.

**Note2:** The extracted delays due to the P&R  avaialble in a sdf file (standard delay format).  The file is loaded in the verilog test bench  by adding the following lines:

initial begin
	$sdf_annotate ("./TOP_TM_select_slow_1_62V_125C.sdf",rx_mod, , "sdf.log", "MAXIMUM");
end

where rx_mod is the name of the instance that will be annotated.




